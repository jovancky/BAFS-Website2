<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSE Accounting Master: Adjustments</title>
    <!-- Tailwind for base styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- AOS for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --bg-dark: #0f172a;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: radial-gradient(circle at 0% 0%, #1e1b4b 0%, #0f172a 100%);
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Enhanced Glassmorphism */
        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 28px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            background: rgba(30, 41, 59, 0.5);
            box-shadow: 0 20px 40px -20px rgba(0, 0, 0, 0.5);
        }

        /* T-Account styling */
        .t-account {
            border-top: 4px solid var(--primary);
            background: rgba(15, 23, 42, 0.4);
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.2);
            border-radius: 0 0 24px 24px;
        }

        .t-account-mid {
            border-right: 1px dashed rgba(148, 163, 184, 0.2);
        }

        /* Navigation Buttons */
        .nav-btn {
            position: relative;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .nav-btn.active {
            background: var(--primary);
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.4);
            color: white;
        }

        .exam-gradient {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        input:focus {
            outline: none;
            border-color: var(--primary) !important;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
        }

        .correct-input {
            border-color: #10b981 !important;
            background: rgba(16, 185, 129, 0.1) !important;
        }

        .wrong-input {
            border-color: #ef4444 !important;
            background: rgba(239, 68, 68, 0.1) !important;
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8 lg:p-12">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-16 gap-6" data-aos="fade-down">
            <div class="text-center md:text-left">
                <h1 class="text-4xl font-black tracking-tight text-white mb-1">BAFS <span class="text-indigo-400">Revision Pro</span></h1>
                <p class="text-slate-400 font-medium">Targeting Level 5** Adjustments & Terminology</p>
            </div>
            
            <nav class="flex gap-2 p-1.5 bg-slate-800/40 backdrop-blur-xl rounded-2xl border border-slate-700/50">
                <button onclick="showPage('concept')" id="btn-concept" class="tab-btn nav-btn px-6 py-2.5 rounded-xl text-sm font-bold active">Concepts</button>
                <button onclick="showPage('quiz')" id="btn-quiz" class="tab-btn nav-btn px-6 py-2.5 rounded-xl text-sm font-bold text-slate-400">Exam Quiz</button>
            </nav>
        </header>

        <!-- Concept Page -->
        <div id="page-concept" class="fade-in">
            <div class="grid lg:grid-cols-12 gap-8">
                <div class="lg:col-span-8 space-y-8">
                    <!-- Main Concept Card -->
                    <div class="glass-card p-8 md:p-10" data-aos="fade-right">
                        <h2 class="text-2xl font-extrabold text-white mb-8 flex items-center gap-3">
                            <span class="w-8 h-8 bg-indigo-500/20 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            </span>
                            Accrual Matching Principle
                        </h2>
                        
                        <div class="grid md:grid-cols-2 gap-6 mb-10">
                            <!-- Expenses -->
                            <div class="space-y-4" data-aos="zoom-in" data-aos-delay="100">
                                <h3 class="text-indigo-400 font-bold uppercase tracking-widest text-[11px]">For Expenses</h3>
                                <div class="bg-slate-900/60 p-5 rounded-2xl border border-white/5">
                                    <div class="mb-4">
                                        <p class="text-slate-500 text-[10px] font-bold uppercase mb-1">Prepaid Expenses</p>
                                        <p class="text-xl font-bold text-white">Current Asset</p>
                                    </div>
                                    <div>
                                        <p class="text-slate-500 text-[10px] font-bold uppercase mb-1">Accrued Expenses</p>
                                        <p class="text-xl font-bold text-white">Current Liability</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Revenue -->
                            <div class="space-y-4" data-aos="zoom-in" data-aos-delay="200">
                                <h3 class="text-orange-400 font-bold uppercase tracking-widest text-[11px]">For Revenue</h3>
                                <div class="bg-slate-900/60 p-5 rounded-2xl border border-white/5">
                                    <div class="mb-4">
                                        <p class="text-slate-500 text-[10px] font-bold uppercase mb-1">Income Receivable</p>
                                        <p class="text-xl font-bold text-white">Current Asset</p>
                                    </div>
                                    <div>
                                        <p class="text-slate-500 text-[10px] font-bold uppercase mb-1">Unearned Revenue</p>
                                        <p class="text-xl font-bold text-white">Current Liability</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-indigo-500/10 border-l-4 border-indigo-500 p-6 rounded-r-2xl" data-aos="fade-up">
                            <p class="text-indigo-200 text-sm leading-relaxed italic">
                                Tip: For revenue, remember that "Balance c/f" can represent either an Asset (Receivable) or a Liability (Unearned) depending on which side it appears.
                            </p>
                        </div>
                    </div>

                    <!-- Rent-Free Card -->
                    <div class="glass-card p-10 exam-gradient text-white relative overflow-hidden" data-aos="fade-up">
                        <div class="relative z-10">
                            <h3 class="font-black text-2xl mb-3 flex items-center gap-3">ðŸš€ Rent-Free Period</h3>
                            <p class="text-white/90 text-sm leading-relaxed mb-6 max-w-lg">Amortise the total cost equally across all months of the contract to reflect the true economic cost.</p>
                            <div class="bg-black/20 backdrop-blur-md p-5 rounded-2xl border border-white/10 font-mono text-center shadow-xl">
                                Total Contract Sum Ã· Total Contract Duration = Monthly Expense
                            </div>
                        </div>
                        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"></div>
                    </div>
                </div>

                <!-- Glossary Sidebar -->
                <div class="lg:col-span-4 space-y-6">
                    <div class="glass-card p-8 border-l-4 border-amber-500" data-aos="fade-left">
                        <h3 class="font-bold text-amber-500 mb-6 flex items-center gap-2 uppercase text-xs tracking-widest">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                            DSE Labels Glossary
                        </h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-slate-900/40 rounded-xl border border-white/5">
                                <p class="text-[10px] text-slate-500 uppercase font-black mb-2">Standard Expense</p>
                                <p class="text-white text-xs font-semibold leading-relaxed">Accrued b/f, Accrued c/f, Prepaid b/f, Prepaid c/f</p>
                            </div>
                            <div class="p-4 bg-slate-900/40 rounded-xl border border-white/5">
                                <p class="text-[10px] text-slate-500 uppercase font-black mb-2">Standard Revenue</p>
                                <p class="text-white text-xs font-semibold leading-relaxed">Balance b/f, Balance c/f, Income Receivable c/f, Unearned Revenue c/f</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Page -->
        <div id="page-quiz" class="hidden">
            <div class="glass-card p-6 md:p-12 relative overflow-hidden min-h-[600px]">
                <!-- Menu -->
                <div id="quiz-menu" class="max-w-2xl mx-auto py-10" data-aos="zoom-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-black text-white mb-4 italic">DSE Entry Challenges</h2>
                        <p class="text-slate-400">Analyze the scenarios and complete the T-accounts.</p>
                    </div>
                    <div class="grid gap-4">
                        <button onclick="startQuiz('rent')" class="group flex items-center justify-between p-8 bg-slate-800/30 border border-slate-700/50 rounded-3xl hover:border-indigo-500 transition-all duration-300 text-left">
                            <div><h3 class="font-bold text-white group-hover:text-indigo-400">Case Study: Complex Rent</h3><p class="text-xs text-slate-500">Rent-free and pro-rata adjustments.</p></div>
                            <span class="text-indigo-500 opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all font-black">â†’</span>
                        </button>

                        <button onclick="startQuiz('expense')" class="group flex items-center justify-between p-8 bg-slate-800/30 border border-slate-700/50 rounded-3xl hover:border-amber-500 transition-all duration-300 text-left">
                            <div><h3 class="font-bold text-white group-hover:text-amber-400">Case Study: Office Expenses</h3><p class="text-xs text-slate-500">Accruals and Prepayments scenarios.</p></div>
                            <span class="text-amber-500 opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all font-black">â†’</span>
                        </button>

                        <button onclick="startQuiz('revenue')" class="group flex items-center justify-between p-8 bg-slate-800/30 border border-slate-700/50 rounded-3xl hover:border-emerald-500 transition-all duration-300 text-left">
                            <div><h3 class="font-bold text-white group-hover:text-emerald-400">Case Study: Service Revenue</h3><p class="text-xs text-slate-500">Receivables and Unearned scenarios.</p></div>
                            <span class="text-emerald-500 opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all font-black">â†’</span>
                        </button>
                    </div>
                </div>

                <!-- Active Challenge -->
                <div id="quiz-active" class="hidden">
                    <div class="flex justify-between items-center mb-10">
                        <button onclick="backToMenu()" class="text-[10px] font-black tracking-widest text-slate-500 hover:text-white transition-colors">EXIT WORKSHOP</button>
                        <div class="flex flex-col items-center">
                            <span id="q-progress" class="text-[10px] font-black text-indigo-400 tracking-[0.2em] mb-2 uppercase">Challenge 1/3</span>
                            <div class="h-1.5 w-48 bg-slate-800 rounded-full overflow-hidden">
                                <div id="q-bar" class="h-full bg-indigo-500 transition-all duration-700 ease-out" style="width: 33%"></div>
                            </div>
                        </div>
                        <span id="q-category-label" class="px-4 py-1.5 rounded-full bg-slate-800/50 border border-white/5 text-[10px] font-bold text-slate-400">CATEGORY</span>
                    </div>

                    <div class="max-w-4xl mx-auto space-y-10">
                        <div class="p-8 bg-indigo-500/5 border border-indigo-500/10 rounded-3xl" data-aos="fade-up">
                            <p id="q-text" class="text-lg font-medium text-slate-100 leading-relaxed italic text-center">Loading scenario...</p>
                        </div>

                        <div data-aos="zoom-in" data-aos-delay="200">
                            <h3 id="quiz-account-title" class="text-center font-black text-indigo-400 mb-4 tracking-[0.3em] uppercase text-xs">Account Name</h3>
                            <div class="t-account flex bg-slate-900/40 border-x border-b border-slate-700/50 min-h-[300px]">
                                <div class="t-account-mid flex-1 p-6 space-y-6">
                                    <div class="text-[10px] font-black text-slate-600 tracking-widest uppercase">Debit</div>
                                    <div id="dr-inputs" class="space-y-4"></div>
                                </div>
                                <div class="flex-1 p-6 space-y-6 text-right">
                                    <div class="text-[10px] font-black text-slate-600 tracking-widest uppercase">Credit</div>
                                    <div id="cr-inputs" class="space-y-4"></div>
                                </div>
                            </div>
                        </div>

                        <div id="q-feedback" class="p-5 rounded-2xl text-[11px] font-black text-center hidden transform transition-all"></div>

                        <div class="flex flex-col md:flex-row justify-between items-center gap-6 pb-10">
                            <div class="flex gap-6">
                                <button id="hint-btn" onclick="showHint()" class="text-[10px] font-black text-indigo-400 hover:text-indigo-300 tracking-wider uppercase">ðŸ’¡ Need a Hint?</button>
                                <button id="reveal-btn" onclick="revealAnswer()" class="hidden text-[10px] font-black text-orange-400 hover:text-orange-300 tracking-wider uppercase">ðŸŽ¯ Show Answer</button>
                            </div>
                            <div class="flex gap-4 w-full md:w-auto">
                                <button id="check-btn" onclick="checkAnswers()" class="w-full md:w-auto bg-indigo-600 text-white px-10 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-500/20">Check Entries</button>
                                <button id="next-btn" onclick="nextQuestion()" class="hidden w-full md:w-auto bg-emerald-600 text-white px-10 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-500 transition-all">Next Entry</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Result -->
                <div id="quiz-result" class="hidden text-center py-20" data-aos="zoom-out">
                    <div class="w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-8">
                        <svg class="w-10 h-10 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h2 class="text-3xl font-black text-white mb-2 uppercase italic">Challenge Complete!</h2>
                    <p class="text-slate-400 mb-10">You've mastered these adjustment scenarios.</p>
                    <button onclick="backToMenu()" class="bg-indigo-600 px-12 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 transition-all">Finish Category</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            easing: 'ease-out-cubic',
            once: true
        });

        const currentYear = 2025;
        const quizData = {
            rent: [
                {
                    q: `The accounting year ends on 31 Dec ${currentYear}. On 1 June ${currentYear}, the firm signed a 12-month lease for $3,000/month. The landlord offered 1 month rent-free (June). The firm issued a cheque for the remaining months of the year on 1 June. Record the Bank and P&L (Amortised) for ${currentYear}.`,
                    account: "Rent Expense",
                    dr: [{ label: "Bank", amt: "18000" }, { label: "Accrued c/f", amt: "3000" }],
                    cr: [{ label: "P&L", amt: "21000" }],
                    hint: "Total rent for 11 paid months is $33,000. Amortised monthly is $2,750 ($33k/12). From June to Dec (7 months), P&L is $19,250. Paid was $18k (June-Dec minus June). Difference is accrued."
                },
                {
                    q: `For the year ended 31 Dec ${currentYear}, office rent was $4,000 monthly. In Dec ${currentYear-1}, the firm had already settled the rent for Jan ${currentYear}. Total cheques issued in ${currentYear} amounted to $40,000. Record the opening adjustment and P&L.`,
                    account: "Rent Expense",
                    dr: [{ label: "Bank", amt: "40000" }, { label: "Prepaid b/f", amt: "4000" }, { label: "Accrued c/f", amt: "4000" }],
                    cr: [{ label: "P&L", amt: "48000" }],
                    hint: "Jan was paid last year (Prepaid b/f). Dec rent is still unpaid (Accrued c/f)."
                },
                {
                    q: `A 10-month contract was signed on 1 Oct ${currentYear} at $5,000/month. No cash has been paid as of 31 Dec ${currentYear}. Record the adjustment for the current period.`,
                    account: "Rent Expense",
                    dr: [{ label: "Accrued c/f", amt: "15000" }],
                    cr: [{ label: "P&L", amt: "15000" }],
                    hint: "Oct, Nov, Dec (3 months) are unpaid. Use Accrued c/f."
                }
            ],
            expense: [
                {
                    q: `At 1 Jan ${currentYear}, wages of $2,500 for Dec ${currentYear-1} remained unpaid. During ${currentYear}, total wages of $35,000 were paid via bank. On 31 Dec ${currentYear}, wages of $3,000 for the current month were still owing. Record the b/f, Bank, and P&L.`,
                    account: "Wages Expense",
                    dr: [{ label: "Bank", amt: "35000" }, { label: "Accrued c/f", amt: "3000" }],
                    cr: [{ label: "Accrued b/f", amt: "2500" }, { label: "P&L", amt: "35500" }],
                    hint: "Accrued b/f is a liability (Cr). Accrued c/f increases Dr."
                },
                {
                    q: `In the previous year (${currentYear-1}), the firm paid $1,200 for an insurance policy covering Jan-Mar ${currentYear}. In ${currentYear}, a new premium of $5,000 was paid for the rest of the year. Record the opening adjustment and Bank.`,
                    account: "Insurance Expense",
                    dr: [{ label: "Prepaid b/f", amt: "1200" }, { label: "Bank", amt: "5000" }],
                    cr: [{ label: "P&L", amt: "6200" }],
                    hint: "Insurance paid last year for this year is Prepaid b/f (Dr)."
                },
                {
                    q: `Electricity paid during ${currentYear} was $8,800. Investigation shows this included a $600 deposit for a new meter and $400 for electricity used in Jan ${currentYear+1}. Record the P&L and closing adjustment.`,
                    account: "Electricity",
                    dr: [{ label: "Bank", amt: "8800" }],
                    cr: [{ label: "Prepaid c/f", amt: "1000" }, { label: "P&L", amt: "7800" }],
                    hint: "Deposit and next year's payment are both Prepaid c/f (Cr)."
                }
            ],
            revenue: [
                {
                    q: `As at 1 Jan ${currentYear}, a client owed $1,500 for services provided in Dec ${currentYear-1}. In ${currentYear}, the client paid $10,000 in total. No other amounts were outstanding at year-end. Record the b/f and Bank.`,
                    account: "Service Revenue",
                    dr: [{ label: "Balance b/f", amt: "1500" }, { label: "P&L", amt: "8500" }],
                    cr: [{ label: "Bank", amt: "10000" }],
                    hint: "Revenue owed to us (Asset) is Balance b/f (Dr)."
                },
                {
                    q: `During ${currentYear}, the firm received $24,000 for a 2-year service contract starting 1 July ${currentYear}. Record the Bank receipt and the adjustment at 31 Dec ${currentYear}.`,
                    account: "Contract Revenue",
                    dr: [{ label: "P&L", amt: "6000" }, { label: "Balance c/f", amt: "18000" }],
                    cr: [{ label: "Bank", amt: "24000" }],
                    hint: "Only 6 months of revenue belongs to this year. 18 months is Unearned (Balance c/f on Dr side)."
                },
                {
                    q: `Commission of $5,000 was received in ${currentYear}. This included $800 received in advance for ${currentYear+1}, and excludes $400 commission earned in ${currentYear} but not yet received. Record all adjustments.`,
                    account: "Commission Revenue",
                    dr: [{ label: "Balance c/f", amt: "800" }, { label: "P&L", amt: "4600" }],
                    cr: [{ label: "Bank", amt: "5000" }, { label: "Balance c/f", amt: "400" }],
                    hint: "Unearned is Dr Balance c/f. Receivable is Cr Balance c/f."
                }
            ]
        };

        let currentQuizSet = [];
        let qIdx = 0;
        let hintCount = 0;
        let activeCategory = '';

        function showPage(p) {
            document.getElementById('page-concept').classList.toggle('hidden', p !== 'concept');
            document.getElementById('page-quiz').classList.toggle('hidden', p !== 'quiz');
            document.getElementById('btn-concept').classList.toggle('active', p === 'concept');
            document.getElementById('btn-quiz').classList.toggle('active', p === 'quiz');
            if (p === 'concept') AOS.refresh();
        }

        function startQuiz(cat) {
            activeCategory = cat;
            currentQuizSet = quizData[cat];
            qIdx = 0;
            document.getElementById('quiz-menu').classList.add('hidden');
            document.getElementById('quiz-active').classList.remove('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('q-category-label').innerText = cat.toUpperCase();
            loadChallenge();
        }

        function loadChallenge() {
            const data = currentQuizSet[qIdx];
            hintCount = 0;
            document.getElementById('q-progress').innerText = `Challenge ${qIdx+1}/3`;
            document.getElementById('q-bar').style.width = ((qIdx+1)/3*100)+'%';
            document.getElementById('q-text').innerText = data.q;
            document.getElementById('quiz-account-title').innerText = data.account;
            
            const f = document.getElementById('q-feedback');
            f.classList.add('hidden');
            
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('reveal-btn').classList.add('hidden');
            
            setupSide('dr', data.dr);
            setupSide('cr', data.cr);
            AOS.refresh();
        }

        function setupSide(side, entries) {
            const container = document.getElementById(side + '-inputs');
            container.innerHTML = '';
            entries.forEach(entry => {
                const div = document.createElement('div');
                div.className = "flex gap-2 items-center" + (side === 'cr' ? " justify-end" : "");
                div.innerHTML = `
                    <input type="text" placeholder="Entry Label" data-ans-label="${entry.label}" class="quiz-input-label w-40 p-3 bg-slate-800/60 border border-slate-700/50 rounded-xl text-[10px] text-white">
                    <input type="text" placeholder="$0" data-ans-amt="${entry.amt}" class="quiz-input-amt w-24 p-3 bg-slate-800/60 border border-slate-700/50 rounded-xl text-[10px] text-white text-right font-mono">
                `;
                container.appendChild(div);
            });
        }

        function checkAnswers() {
            const labels = document.querySelectorAll('.quiz-input-label');
            const amts = document.querySelectorAll('.quiz-input-amt');
            let allCorrect = true;

            labels.forEach(i => {
                const val = i.value.trim().toLowerCase();
                const ans = i.dataset.ansLabel.toLowerCase();
                if (val === ans || (ans === "p&l" && val === "profit and loss")) {
                    i.classList.add('correct-input'); i.classList.remove('wrong-input');
                } else {
                    i.classList.add('wrong-input'); allCorrect = false;
                }
            });

            amts.forEach(i => {
                const val = i.value.trim().replace(/[$,]/g, '');
                if (val === i.dataset.ansAmt) {
                    i.classList.add('correct-input'); i.classList.remove('wrong-input');
                } else {
                    i.classList.add('wrong-input'); allCorrect = false;
                }
            });

            const f = document.getElementById('q-feedback');
            f.classList.remove('hidden');

            if (allCorrect) {
                f.className = "p-5 rounded-2xl text-[10px] font-black bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 uppercase tracking-widest";
                f.innerText = "Entry Matched Perfectly.";
                document.getElementById('next-btn').classList.remove('hidden');
                document.getElementById('check-btn').classList.add('hidden');
            } else {
                f.className = "p-5 rounded-2xl text-[10px] font-black bg-red-500/10 text-red-400 border border-red-500/20 uppercase tracking-widest";
                f.innerText = "Calculations or Labels need checking.";
            }
        }

        function showHint() {
            hintCount++;
            const f = document.getElementById('q-feedback');
            f.className = "p-5 rounded-2xl text-xs font-bold bg-indigo-500/10 text-indigo-300 border border-indigo-500/20 italic";
            f.innerText = "ðŸ’¡ " + currentQuizSet[qIdx].hint;
            f.classList.remove('hidden');
            if (hintCount >= 3) document.getElementById('reveal-btn').classList.remove('hidden');
        }

        function revealAnswer() {
            document.querySelectorAll('.quiz-input-label').forEach(i => i.value = i.dataset.ansLabel);
            document.querySelectorAll('.quiz-input-amt').forEach(i => i.value = i.dataset.ansAmt);
            checkAnswers();
        }

        function nextQuestion() {
            qIdx++;
            if(qIdx < 3) loadChallenge();
            else {
                document.getElementById('quiz-active').classList.add('hidden');
                document.getElementById('quiz-result').classList.remove('hidden');
                AOS.refresh();
            }
        }

        function backToMenu() {
            document.getElementById('quiz-active').classList.add('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('quiz-menu').classList.remove('hidden');
            AOS.refresh();
        }
    </script>
</body>
</html>
